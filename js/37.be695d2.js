(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{HYTv:function(t,e,o){"use strict";var a=o("X0jz"),n=o.n(a);n.a},X0jz:function(t,e,o){},gYI6:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("q-toolbar",{attrs:{color:"faded"}},[o("q-toolbar-title",[t._v("\n      Attendance List        \n    ")]),t.ifOrientation?o("q-btn",{staticClass:"q-ml-sm q-ma-sm float-right",attrs:{icon:"people",label:"Show Ups("+t.getShowupCount+")",color:"dark"},on:{click:t.showShowUpModal}}):t._e(),t.ifOrientation?o("q-btn",{staticClass:"q-ml-sm q-ma-sm float-right",attrs:{icon:"border_color",label:"Contract Signing("+t.getShowupCount+")",color:"secondary",to:"/contractsigned"}}):t._e(),t.ifNotOrientation?o("q-btn",{staticClass:"q-ml-sm q-ma-sm float-right",attrs:{icon:"check_box",label:"Confirmed Attendance("+t.getPresentCount+")",color:"secondary"},on:{click:t.showConfirmed}}):t._e()],1),o("div",{staticClass:"col-3 q-ma-md"},[o("q-table",{attrs:{title:t.$route.params.title,data:t.getModels,loading:t.tableLoading,columns:t.Modelcolumns,pagination:t.Modelpagination,separator:"horizontal",selection:"multiple",selected:t.selected,"no-data-label":"No Models","row-key":".key",filter:t.filter},on:{"update:pagination":function(e){t.Modelpagination=e},"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top-left",fn:function(e){return[o("h5",{staticStyle:{"font-size":"18"}},[t._v(t._s(t.activityType.toUpperCase())+" - "),o("span",{staticClass:"text-faded text-weight-light text-italic"},[t._v(t._s(t.activityDate))])])]}},{key:"top-right",fn:function(e){return[o("q-search",{staticClass:"bg-dark",staticStyle:{width:"180px"},attrs:{"hide-underline":"",inverted:""},on:{input:t.test},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),o("q-btn",{staticClass:"q-ml-sm float-right cardsButtonsDesktop",attrs:{label:"View Selected("+t.getSelectedRowCount+")",color:"primary"},on:{click:t.showModal}}),o("q-btn",{staticClass:"q-ml-sm float-right cardsButtonsMobile",attrs:{label:"View Selected("+t.getSelectedRowCount+")",color:"primary",size:"sm"},on:{click:t.showModal}})]}},{key:"body-cell-Picture",fn:function(t){return o("q-td",{attrs:{props:t}},[o("div",{style:"border-radius:15px; width: 150px;height:125px;background-position: center;background-image: url("+t.row.photo+");background-repeat: no-repeat;background-size: cover;border: 2px solid black;"})])}},{key:"body-cell-time",fn:function(e){return o("q-td",{attrs:{props:e}},[t._v("\n        "+t._s(t.$moment(e.row.activityTime).format("LT"))+"\n      ")])}}])})],1),t.attendanceModal?o("q-modal",{attrs:{"content-css":{minWidth:"35vw",minHeight:"95vh"}},model:{value:t.attendanceModal,callback:function(e){t.attendanceModal=e},expression:"attendanceModal"}},[o("q-modal-layout",[o("q-toolbar",{staticClass:"bg-dark full-width"},[o("q-toolbar-title",[t._v("\n            "+t._s(t.activityType.toUpperCase())+" - "+t._s(t.activityDate)+"\n          ")])],1),o("q-search",{staticClass:"text-white",attrs:{icon:"search",inverted:"",color:"faded",clearable:"",placeholder:"Search name"},model:{value:t.selectSearch,callback:function(e){t.selectSearch=e},expression:"selectSearch"}}),o("q-scroll-area",{staticStyle:{width:"100%",height:"85vh"}},[t._l(t.filteredSelect,function(e){return o("q-list",{key:e[".key"],attrs:{link:"",dense:""}},[o("q-item",[o("q-item-side",{attrs:{icon:"label",color:"faded"}}),o("q-item-main",{staticClass:"capitalize q-body-1"},[t._v(t._s(e.firstName)+" "+t._s(e.middleInitial)+". "+t._s(e.lastName))]),o("q-item-side",[o("q-btn",{attrs:{icon:"close",outline:"",color:"red",push:"",rounded:"",size:"sm"},on:{click:function(o){t.UnSelect(e)}}})],1)],1)],1)}),0===t.getSelectedRowCount?o("div",{staticClass:"text-center text-faded q-display-1 fixed-center"},[t._v("No Models Listed")]):t._e()],2),o("div",{attrs:{slot:"footer"},slot:"footer"},[t.ifOrientation?o("q-btn",{staticClass:"q-pa-sm full-width",attrs:{color:"primary",icon:"check",size:"lg",label:"Confirm Attendance("+t.getSelectedRowCount+")"},on:{click:t.setSelectedPresent}}):t._e(),t.ifNotOrientation?o("q-btn",{staticClass:"q-pa-sm full-width",attrs:{color:"primary",icon:"check_box",size:"lg",label:"Confirm Attendance("+t.getSelectedRowCount+")"},on:{click:t.setActivityAttendance}}):t._e()],1)],1)],1):t._e(),t.showUpsModal?o("q-modal",{attrs:{"content-css":{minWidth:"35vw",minHeight:"95vh"}},model:{value:t.showUpsModal,callback:function(e){t.showUpsModal=e},expression:"showUpsModal"}},[o("q-modal-layout",[o("q-toolbar",{staticClass:"bg-dark full-width"},[o("q-toolbar-title",[t._v("\n            "+t._s(t.activityType.toUpperCase())+" - "+t._s(t.activityDate)+"\n          ")])],1),o("q-search",{staticClass:"text-white",attrs:{icon:"search",inverted:"",color:"faded",clearable:"",placeholder:"Search name"},model:{value:t.showUpSearch,callback:function(e){t.showUpSearch=e},expression:"showUpSearch"}}),o("q-scroll-area",{staticStyle:{width:"100%",height:"85vh"}},[t._l(t.filteredShowUp,function(e){return o("q-list",{key:e[".key"],attrs:{link:"",dense:""}},[o("q-item",[o("q-item-side",{attrs:{icon:"label",color:"faded"}}),o("q-item-main",{staticClass:"capitalize q-body-1"},[t._v(t._s(e.firstName)+" "+t._s(e.middleInitial)+". "+t._s(e.lastName))]),o("q-item-side",[o("q-btn",{attrs:{icon:"close",outline:"",color:"red",push:"",rounded:"",size:"sm"},on:{click:function(o){t.Back2Models(e)}}})],1)],1)],1)}),0===t.getShowupCount?o("div",{staticClass:"text-center text-faded q-display-1 fixed-center"},[t._v("No Models Listed")]):t._e()],2)],1)],1):t._e(),t.confirmedAttendanceModal?o("q-modal",{attrs:{"content-css":{minWidth:"35vw",minHeight:"95vh"}},model:{value:t.confirmedAttendanceModal,callback:function(e){t.confirmedAttendanceModal=e},expression:"confirmedAttendanceModal"}},[o("q-modal-layout",[o("q-toolbar",{staticClass:"bg-dark full-width"},[o("q-toolbar-title",[t._v("\n            "+t._s(t.activityType.toUpperCase())+" - "+t._s(t.activityDate)+"\n          ")])],1),o("q-search",{staticClass:"text-white",attrs:{icon:"search",inverted:"",color:"faded",clearable:"",placeholder:"Search name"},model:{value:t.nameSearch,callback:function(e){t.nameSearch=e},expression:"nameSearch"}}),o("q-scroll-area",{staticStyle:{width:"100%",height:"85vh"}},[t._l(t.filteredConfirm,function(e){return o("q-list",{key:e[".key"],attrs:{link:"",dense:""}},[o("q-item",[o("q-item-side",{attrs:{icon:"check_box",color:"faded"}}),o("q-item-main",{staticClass:"capitalize q-body-1"},[t._v(t._s(e.firstName)+" "+t._s(e.middleInitial)+". "+t._s(e.lastName))]),o("q-item-side",[o("q-btn",{attrs:{icon:"close",outline:"",color:"red",push:"",rounded:"",size:"sm"},on:{click:function(o){t.getConfirmationBack(e)}}})],1)],1)],1)}),0===t.getPresentCount?o("div",{staticClass:"text-center text-faded q-display-1 fixed-center"},[t._v("No Models Listed")]):t._e()],2)],1)],1):t._e(),o("q-page-sticky",{attrs:{position:"bottom-right",offset:[20,50]}},[o("q-btn",{staticClass:"animate-pop",attrs:{fab:"",color:"primary",icon:"check_box"},on:{click:t.showModal}},[o("span",{staticClass:"text-weight-thin",staticStyle:{"font-size":"9px"}},[t._v("Selected")])]),t.getSelectedRowCount?o("q-chip",{attrs:{floating:"",color:"red"}},[t._v(t._s(t.getSelectedRowCount))]):t._e()],1)],1)},n=[],i=(o("rGqo"),o("a1Th"),o("INYr"),o("MVZn")),s=o.n(i),l=(o("KKXr"),o("SRfc"),o("Oyvg"),o("oYx3"),{name:"attendanceSheet",created:function(){this.batches=this.$route.params.id,this.activityDate=this.$route.params.date,this.activityType=this.$route.params.type},mounted:function(){this.$bindAsArray("event_schedules",this.$database.ref("event_schedules")),this.$bindAsArray("model_list",this.$database.ref("models")),this.$bindAsArray("showUpList",this.$database.ref("showUpModels")),this.$bindAsArray("attendance",this.$database.ref("attendance"))},computed:{filteredShowUp:function(){var t=this;return this.getShowUps.filter(function(e){var o=new RegExp(t.showUpSearch,"i"),a=e.firstName+" "+e.lastName;return a.match(o)})},filteredSelect:function(){var t=this;return this.selected.filter(function(e){var o=new RegExp(t.selectSearch,"i"),a=e.firstName+" "+e.lastName;return a.match(o)})},filteredConfirm:function(){var t=this;return this.getConfirmed.filter(function(e){var o=new RegExp(t.nameSearch,"i"),a=e.firstName+" "+e.lastName;return a.match(o)})},getActivities:function(){return console.log("activities",this.$store.getters["schedules/getSeeAllSchedules"]),this.$store.getters["schedules/getSeeAllSchedules"]},getModels:function(){var t=this;try{if("orientation"!==this.$route.params.type){console.log("getmodels not orientation");for(var e=this.$lodash.split(this.$route.params.id,"$"),o=[],a=function(){var a=e[n];console.log("key",a);var i=t.returnBatchActivity(a);console.log("batchActivity",i);var l=[],c="",d=null,h=t.$moment(new Date(t.activityDate)).format("ll");t.$lodash.map(i,function(e){var o=t.$moment(new Date(e.startDate)).format("ll");e.type===t.activityType&&h===o?(c=e.id,d=new Date(e.startDate)):l.push(e)});console.log("titles",c);var u=t.returnAttendanceList(a,c);for(console.log("attendanceList",u),r=0;r<u.length;r++){var f=s()({},u[r]);f.activityID=c,f.activityTime=d,f.activityKey=a,o.push(f)}console.log("napush",o)},n=0;n<e.length;n++){a()}return console.log("GETMODELS",o),o}var i=this.$lodash.split(this.$route.params.id,"$");console.log("split batches",i);var l=[],c=function(){var e=i[n],o=t.returnBatchActivity(e),a=[],s="",c=null,d=t.$moment(new Date(t.activityDate)).format("ll");t.$lodash.map(o,function(e){var o=t.$moment(new Date(e.startDate)).format("ll");e.type===t.activityType&&d===o?(s=e.id,c=new Date(e.startDate)):a.push(e)});for(r=0;r<t.model_list.length;r++)if(t.model_list[r].batchKey===i[n]){var h=t.model_list[r];h.activityID=s,h.activityTime=c,l.push(h)}};for(n=0;n<i.length;n++){var r;c()}return console.log("all models in batches",l),l}catch(t){return console.log("err",t),[]}},getModelsInfo:function(){var t=this.$lodash.filter(this.getModels,function(t){return t});return console.log("log",t),t},getShowUps:function(){var t=this.$lodash.split(this.$route.params.id,"$");console.log("split batches",t);for(var e=[],o=0;o<t.length;o++){t[o];for(var a=0;a<this.showUpList.length;a++)if(this.showUpList[a].batchKey===t[o]){var n=this.showUpList[a];e.push(n)}}return this.$bindAsArray("showUpList",this.$database.ref("showUpModels")),this.$forceUpdate(),console.log("showUpModels In Batch",e),e},getSelectedRowCount:function(){return console.log("selectedL",this.selected.length),console.log("selectedL",this.selected),this.selected.length},getPresentCount:function(){return this.getConfirmed.length},getConfirmed:function(){var t=this;try{for(var e=this.$lodash.split(this.$route.params.id,"$"),o=[],a=function(){var a=e[n],s=t.returnBatchActivity(a),l=[],c="",r=(t.$lodash.map(s,function(e){e.type===t.activityType?c=e.id:l.push(e)}),t.returnConfirmedList(a,c));for(i=0;i<r.length;i++){var d=r[i];o.push(d)}},n=0;n<e.length;n++){var i;a()}return console.log("modelsBatch_length",o),o}catch(t){return[]}},getShowupCount:function(){var t=this.$lodash.split(this.$route.params.id,"$");console.log("split batches",t);for(var e=[],o=0;o<t.length;o++){t[o];for(var a=0;a<this.showUpList.length;a++)if(this.showUpList[a].batchKey===t[o]){var n=this.showUpList[a];e.push(n)}}return console.log("all models in batches",e.length),e.length},ifNotOrientation:function(){return"orientation"!==this.$route.params.type},ifOrientation:function(){return"orientation"===this.$route.params.type}},data:function(){return{attendance:[],attendanceList:[],attendanceModal:!1,showUpsModal:!1,confirmedAttendanceModal:!1,filter:"",selected:[],nameSearch:"",selectSearch:"",showUpSearch:"",activityType:"",activityDate:"",batchKey:"",event_schedules:[],model_list:[],showUpList:[],tableLoading:!1,columns:[{name:"title",required:!0,label:"title",align:"left",field:"title",sortable:!0}],Modelcolumns:[{name:"Picture",required:!0,label:"Picture",align:"center",sortable:!0},{name:"seasonName",required:!0,label:"Season Name",align:"left",sortable:!0,field:"seasonName"},{name:"firstName",required:!0,label:"First Name",align:"left",sortable:!0,field:"firstName"},{name:"middleInitial",required:!0,label:"M.I.",align:"left",sortable:!0,field:"middleInitial"},{name:"lastName",required:!0,label:"Last Name",align:"left",sortable:!0,field:"lastName"},{name:"age",required:!0,label:"Age",align:"left",sortable:!0,field:"age"},{name:"time",required:!0,label:"Time",align:"left",sortable:!0,field:"activityTime"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:10},Modelpagination:{sortBy:null,descending:!1,page:1,rowsPerPage:10}}},methods:{showSeason:function(t){console.log("show season",t)},test:function(){},showModal:function(){this.attendanceModal=!0},showShowUpModal:function(){this.showUpsModal=!0},showConfirmed:function(){this.confirmedAttendanceModal=!0},isPresent:function(t){var e=this,o=this.$lodash.findIndex(t.activitiesAttended,function(t){return t.type===e.activityType});if(-1!=o)return t.activitiesAttended[o].status},present:function(t){var e=this;console.log("m",t);var o=s()({},t),a=o[".key"],n=this.$lodash.findIndex(o.activitiesAttended,function(t){return t.type===e.activityType});-1!=n&&(t.activitiesAttended[n].status=!0,delete o[".key"],console.log("model",o),this.$database.ref("showUpModels").child(a).set(o).then(function(){console.log("status updated")}).catch(function(t){console.log(t)})),this.$forceUpdate()},notSet:function(t){var e=this;console.log("not set",t);var o=t[".key"],a=this.$lodash.findIndex(t.activitiesAttended,function(t){return t.type===e.activityType});-1!=a&&(t.activitiesAttended[a].status=!1,this.$database.ref("showUpModels").child(o).remove().then(function(){console.log("model remove in showup")}).catch(function(t){console.log("err",t)}))},setSelectedPresent:function(){var t=this;this.$q.dialog({title:"Confirm Model/s Attendance?",message:"",ok:"Yes",cancel:"No"}).then(function(){for(var e=function(){var e=t.selected[o],n=e[".key"],i=t;t.selected[o].dateAdded=(new Date).toString(),a=t.$lodash.findIndex(e.activitiesAttended,function(e){return e.type===t.activityType}),-1!=a&&(e.activitiesAttended[a].status=!0,delete e[".key"],console.log("model selected",e),t.$database.ref("showUpModels").child(n).set(e).then(function(){console.log("status updated"),i.$database.ref("models").child(n).remove().then(function(){t.selected=[],i.$bindAsArray("model_list",i.$database.ref("models")),i.$forceUpdate(),t.attendanceModal=!1}).catch(function(){console.log("err on remove")})}).catch(function(t){console.log(t)}))},o=0;o<t.selected.length;o++){var a;e()}t.$q.notify({message:"Model/s Attendance Confirm",type:"positive",color:"positive",textColor:"white",icon:"info"})}).catch(function(){})},UnSelect:function(t){var e=t,o=this.$lodash.filter(this.selected,function(t){if(t[".key"]!==e[".key"])return t});this.selected=o},Back2Models:function(t){var e=this;console.log("not set",t);var o=t[".key"],a=t,n=this.$lodash.findIndex(t.activitiesAttended,function(t){return t.type===e.activityType});-1!=n&&(t.activitiesAttended[n].status=!1,delete a[".key"],this.$database.ref("models").child(o).set(a).then(function(){e.$database.ref("showUpModels").child(o).remove().then(function(){console.log("model remove in showup")}).catch(function(t){console.log("err",t)})}))},setActivityAttendance:function(){var t=this;this.$q.dialog({title:"Confirm Model/s Attendance?",message:"",ok:"Yes",cancel:"No"}).then(function(){for(var e=function(){var e=t.selected[o],a=e[".key"],n=e.activityKey,i=e.activityID;console.log("key & title",e.batchKey+" "+e.activityID);var s=t;delete e[".key"],console.log("model selected",e),t.$database.ref("attendance/"+n+"/"+i+"/present").child(a).set(e).then(function(){console.log("status updated"),s.$database.ref("attendance/"+n+"/"+i+"/models").child(a).remove().then(function(){t.selected=[],s.$bindAsArray("attendanceList",s.$database.ref("attendance/"+n+"/"+i+"/models")),s.$forceUpdate(),t.attendanceModal=!1}).catch(function(){console.log("err on remove")})}).catch(function(t){console.log(t)})},o=0;o<t.selected.length;o++)e();t.$q.notify({message:"Model/s Attendance Confirm",type:"positive",color:"positive",textColor:"white",icon:"info"})}).catch(function(){})},getConfirmationBack:function(t){var e=this;console.log("not set",t);var o=t[".key"],a=t,n=a.activityKey,i=a.activityID,s=this,l=this.$lodash.findIndex(t.activitiesAttended,function(t){return t.type===e.activityType});-1!=l&&(a.activitiesAttended[l].status=!1,delete a[".key"],console.log("model selected",a),this.$database.ref("contractSigned/"+o+"/activitiesAttended/"+l+"/status").set(!1).then(function(){e.$database.ref("attendance/"+n+"/"+i+"/models").child(o).set(a).then(function(){console.log("status updated"),s.$database.ref("attendance/"+n+"/"+i+"/present").child(o).remove().then(function(){e.selected=[],s.$bindAsArray("confirmedList",s.$database.ref("attendance/"+n+"/"+i+"/present")),s.$forceUpdate()}).catch(function(){console.log("err on remove")})})}).catch(function(t){console.log(t)}))},returnBatchActivity:function(t){var e=[];this.$lodash.forEach(this.event_schedules,function(o){o[".key"]===t&&e.push(o)});var o=[];return this.$lodash.forEach(e,function(t){o.push(t.activities)}),console.log("found",e),console.log("activities",o),o[0]},returnAttendanceList:function(t,e){try{var o=[];console.log(t,e),this.$lodash.forEach(this.attendance,function(e){e[".key"]===t&&o.push(e)}),console.log(o);var a=o[0][e].models,n=this.$lodash.filter(a,function(t,e,o){return console.log("value",t),console.log(e),o[e][".key"]=e,o});return console.log("returnAttendanceList models",n),n}catch(t){return[]}},returnConfirmedList:function(t,e){try{var o=[];console.log(t,e),this.$lodash.forEach(this.attendance,function(e){e[".key"]===t&&o.push(e)}),console.log(o);var a=o[0][e].present,n=this.$lodash.filter(a,function(t,e,o){return console.log("value",t),console.log(e),o[e][".key"]=e,o});return console.log("returnAttendanceList models",n),n}catch(t){return[]}}}}),c=l,r=(o("HYTv"),o("KHd+")),d=Object(r["a"])(c,a,n,!1,null,null,null);e["default"]=d.exports}}]);