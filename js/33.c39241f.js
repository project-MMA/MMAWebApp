(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{jSiz:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"col q-ma-lg"},[a("q-table",{attrs:{title:"All Payment Records",filter:t.filter,data:t.getAllTransactions,columns:t.Modelcolumns,"row-key":"batchNumber"},scopedSlots:t._u([{key:"top-right",fn:function(e){return[a("q-search",{staticClass:"bg-dark",staticStyle:{width:"180px"},attrs:{"hide-underline":"",inverted:""},on:{input:t.test},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]}},{key:"body-cell-firstName",fn:function(e){return a("q-td",{attrs:{props:e}},[t._v("\n          "+t._s(e.row.firstName)+"\n          ")])}},{key:"body-cell-payments",fn:function(e){return a("q-td",{attrs:{props:e}},[a("q-btn-dropdown",{attrs:{label:"Payment Records",size:"sm"}},t._l(t.getModelsPaymentTransactions(e.row[".key"]),function(e,n){return a("q-list",{key:n,attrs:{highlight:"",link:"",dense:""}},[a("q-item",[a("q-item-main",{},[t._v("â‚± "+t._s(e.transaction_amount)+" - "+t._s(e.title.slice(-10))+" - "+t._s(t.$moment(e.create_time).format("ll"))+"\n\t\t\t\t\t\t    ")])],1)],1)}))],1)}}])})],1)])},s=[],i=(a("rGqo"),a("yt8O"),a("VVcl")),l=a.n(i),o=a("kv6+"),r={components:{CalendarView:l.a,CalendarAgenda:o["b"]},mounted:function(){this.$bindAsArray("schedules",this.$database.ref("event_schedules")),this.$bindAsArray("payment_transactions",this.$database.ref("payment_transactions")),this.$bindAsArray("contractsigned",this.$database.ref("contractSigned"))},computed:{getAllTransactions:function(){try{var t=this.payment_transactions;console.log("payment_transactions",t);var e=this.$lodash.groupBy(t,"modelKey"),a=this.$lodash.keys(e);console.log("keys",a);for(var n=[],s=this.contractsigned,i=0;i<a.length;i++)for(var l=0;l<s.length;l++)a[i]===s[l][".key"]&&n.push(s[l]);return n}catch(t){return console.log("err",t),[]}},agendaEventSchedules:function(){try{var t=this.allEventSchedules,e=this.$lodash.map(t,function(t){if("payment"!==t.type)return{id:t.id,summary:t.title,description:t.details?t.details:"",location:t.location?t.location:"",start:{dateTime:new Date(t.startDate).toISOString()},end:{dateTime:new Date(t.endDate).toISOString()},color:"faded"}}),a=this.$lodash.compact(e);return a}catch(t){return[]}}},data:function(){return{activity:{originalEvent:{}},filter:"",contractsigned:[],payment_transactions:[],activityModal:!1,schedules:[],viewMode:"calendarMode",showEventTimes:!0,showDate:new Date,startingDayOfWeek:0,Modelcolumns:[{name:"firstName",required:!0,label:"First Name",align:"left",sortable:!0,field:"firstName"},{name:"lastName",required:!0,label:"Last Name",align:"left",sortable:!0,field:"lastName"},{name:"eventName",required:!0,label:"Event",align:"left",sortable:!0,field:"eventName"},{name:"seasonName",required:!0,label:"Season Name",align:"left",sortable:!0,field:"seasonName"},{name:"balance",required:!0,label:"Remaining Balance",align:"left",sortable:!0,field:"balance"},{name:"payments",required:!0,label:"Payment Transactions",align:"left",sortable:!0}]}},methods:{setShowDate:function(t){this.showDate=t},clickEvent:function(t){this.activity.originalEvent=t.originalEvent,this.activityModal=!0},dropOnDate:function(t,e){},test:function(){console.log("schedules",this.schedules);var t=this.allEventSchedules;console.log("activities",t);var e=this.$lodash.map(t,function(t){if("payment"!==t.type)return{id:t.id,summary:t.title,description:t.details?t.details:"",location:t.location?t.location:"",start:{dateTime:new Date(t.startDate).toISOString()},end:{dateTime:new Date(t.endDate).toISOString()},color:t.classes}}),a=this.$lodash.compact(e);console.log("agendaActivities",a)},returnModelData:function(t){try{var e=this.contractsigned,a=this.$lodash.filter(e,function(e){return e[".key"]===t});return console.log(a),a[0]}catch(t){console.log("err")}},getModelsPaymentTransactions:function(t){try{var e=this.$lodash.filter(this.payment_transactions,function(e){return e.modelKey===t});return console.log("modelpayments",e),e}catch(t){return console.log("error",t),[]}}}},c=r,d=a("KHd+"),u=Object(d["a"])(c,n,s,!1,null,null,null);e["default"]=u.exports}}]);