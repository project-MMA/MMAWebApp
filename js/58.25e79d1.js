(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[58],{EbEZ:function(t,e,i){},P5FO:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-toolbar",{attrs:{inverted:""}},[i("q-toolbar-title",[t._v("\n\t\t    Course Settings\n\t\t  ")]),i("q-btn",{attrs:{icon:"add",color:"primary",label:"New Course"},on:{click:function(e){t.$store.commit("settings/updateNewCourseModal",!0)}}})],1),i("div",{staticClass:"flex"},[i("div",{staticClass:"row inline"},[i("div",{staticClass:"col-11 q-ma-md"},[i("q-list",{attrs:{"inset-separator":"",link:""}},[i("q-list-header",[t._v("Courses")]),t._l(t.courses,function(e,s){return i("div",{key:s,on:{click:function(i){t.clickCourse(e)}}},[i("q-item",{attrs:{highlight:""}},[i("div",[i("q-item-main",[i("q-item-tile",{attrs:{label:""}},[t._v(t._s(e.courseName?e.courseName:""))])],1)],1)])],1)})],2)],1)]),i("div",{staticClass:"col q-ma-md"},[i("q-list",{staticStyle:{"min-width":"40vw","min-height":"auto"},attrs:{inline:""}},[i("q-list-header",[t._v("\n\t\t\t\t  \t"+t._s(t.selectCourse.courseName)+"\n\t\t\t\t\t  \t"),i("q-btn",{staticClass:"q-mx-md",attrs:{size:"sm",color:"positive",label:"Arrange Activity"},on:{click:function(e){t.selectCourse=t.selectCourse,t.arrangement(),t.arrangeModal=!0}}}),t.isUsedCourse(t.selectCourse)?i("q-btn",{attrs:{size:"sm",color:"negative",label:"Remove Course"},on:{click:function(e){t.removeCourse(t.selectCourse)}}}):t._e()],1),t._l(t.getActivities,function(e,s){return i("q-item",{key:s},[i("q-item-main",[t._v("\n\t\t\t\t\t\t\t"+t._s(e.label?e.label:"")+"\n\t\t\t\t\t\t\t"),0!=e.dayAfter.dateNumber?i("q-chip",{attrs:{square:"",color:"secondary"}},[t._v("Days After: "+t._s(e.dayAfter.dateNumber)+" "+t._s(e.dayAfter.dateType)+" ")]):t._e()],1),t.isEditActivity(e.value)?i("q-btn",{attrs:{dense:"",color:"info",label:"Edit",icon:"edit"},on:{click:function(i){t.editMode(t.selectCourse,e,s)}}}):t._e(),t.dontDelete(e.value)&&t.isUsedCourse(t.selectCourse)?i("q-btn",{attrs:{label:"Remove",dense:"",color:"negative",icon:"delete"},on:{click:function(i){t.removeActivity(t.selectCourse,e)}}}):t._e()],1)}),i("q-btn",{staticClass:"full-width",attrs:{label:"add activity",color:"primary"},on:{click:function(e){t.addActBtn(),t.newActivity.time=!0,t.activitiesModal=!0}}})],2)],1)]),i("div",[i("q-modal",{attrs:{"content-css":{minWidth:"30vw",minHeight:"45vh"}},on:{hide:function(e){t.courseName=""}},model:{value:t.newCourseModal,callback:function(e){t.newCourseModal=e},expression:"newCourseModal"}},[i("q-modal-layout",{attrs:{"header-style":"min-height: 100px","content-class":"{'bg-primary': isPrimary}","footer-class":"bg-primary some-class","footer-style":"{fontSize: '24px', fontWeight: 'bold'}"}},[i("q-toolbar",[i("q-toolbar-title",[t._v("\n\t            Courses\n\t          ")]),i("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(e){t.newCourseModal=!t.newCourseModal}}})],1),i("div",[i("q-field",{staticClass:"col q-ma-md",attrs:{error:t.$store.getters["settings/isExistCourses"](t.courseName),"error-label":""===t.courseName?"":"Course Already Exist"}},[i("q-input",{attrs:{"float-label":"Course Name",color:"primary",error:t.$v.courseName.$error},on:{blur:function(e){t.capitalize(),t.$store.getters["settings/isExistCourses"](t.courseName),t.$v.courseName.$touch()}},model:{value:t.courseName,callback:function(e){t.courseName=e},expression:"courseName"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[t.isEdit?t._e():i("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:t.addNewCourse}},[t._v("Save")])],1)],1),i("q-inner-loading",{attrs:{visible:t.getNewActivityLoading}},[i("q-spinner",{attrs:{size:"50px",color:"primary"}})],1)],1),i("q-modal",{attrs:{"content-css":{minWidth:"30vw",minHeight:"45vh"}},on:{hide:t.clearModal},model:{value:t.activitiesModal,callback:function(e){t.activitiesModal=e},expression:"activitiesModal"}},[i("q-modal-layout",{attrs:{"header-style":"min-height: 100px","content-class":"{'bg-primary': isPrimary}","footer-class":"bg-primary some-class","footer-style":"{fontSize: '24px', fontWeight: 'bold'}"}},[i("q-toolbar",[i("q-toolbar-title",[t._v("\n\t          \t"+t._s(t.isEdit?"Edit Activity":"New Activity")+"\n\t          ")]),i("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(e){t.activitiesModal=!t.activitiesModal}}})],1),i("div",[i("q-field",{staticClass:"col q-ma-md",attrs:{error:t.activityError,"error-label":t.activityErrorLabel()}},[i("q-input",{staticClass:"col q-ma-md",attrs:{"stack-label":"Activity Name",error:t.$v.activityName.$error},on:{blur:function(e){t.$store.getters["settings/isExistActivity"]({activities:t.selectCourse.activities,activity:t.activityName})}},model:{value:t.activityName,callback:function(e){t.activityName=e},expression:"activityName"}},[i("q-autocomplete",{attrs:{debounce:1e3},on:{search:t.search}})],1)],1),i("div",{staticClass:"q-ma-md"},[0!=t.dayAfter.dateNumber?i("q-field",{staticClass:"col q-ma-md",attrs:{label:"Day Interval",orientation:"vertical"}},[i("div",{staticClass:"row q-ma-md"},[i("div",{staticClass:"col-1 q-my-md"},[i("q-input",{model:{value:t.dayAfter.dateNumber,callback:function(e){t.$set(t.dayAfter,"dateNumber",e)},expression:"dayAfter.dateNumber"}})],1),i("div",{staticClass:"col-3 q-mx-md"},[i("q-select",{attrs:{"float-label":"Interval",options:t.dateTypeOpt},model:{value:t.dayAfter.dateType,callback:function(e){t.$set(t.dayAfter,"dateType",e)},expression:"dayAfter.dateType"}})],1)])]):t._e(),i("q-btn-toggle",{attrs:{rounded:"","toggle-color":"primary",options:[{label:"Time/Location/Details",value:"detailed"},{label:"Due Date",value:"duedate"}]},model:{value:t.actType,callback:function(e){t.actType=e},expression:"actType"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[t.isEdit?t._e():i("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:t.addActivities}},[t._v("Save")]),t.isEdit?i("q-btn",{staticClass:"full-width",attrs:{color:"secondary"},on:{click:t.updateActivity}},[t._v("Update")]):t._e()],1)],1),i("q-inner-loading",{attrs:{visible:t.getNewActivityLoading}},[i("q-spinner",{attrs:{size:"50px",color:"primary"}})],1)],1),i("q-modal",{attrs:{"content-css":{minWidth:"30vw",minHeight:"45vh"}},on:{hide:t.clearModal},model:{value:t.arrangeModal,callback:function(e){t.arrangeModal=e},expression:"arrangeModal"}},[i("q-modal-layout",{attrs:{"header-style":"min-height: 100px","content-class":"{'bg-primary': isPrimary}","footer-class":"bg-primary some-class","footer-style":"{fontSize: '24px', fontWeight: 'bold'}"}},[i("q-toolbar",[i("q-toolbar-title",[t._v("\n\t            Arrange Activity\n\t          ")]),i("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(e){t.arrangeModal=!t.arrangeModal}}})],1),i("div",[i("draggable",{staticClass:"list-group",attrs:{element:"ul",options:t.dragOptions,move:t.checkMove},on:{start:function(e){t.isDragging=!0},end:function(e){t.isDragging=!1}},model:{value:t.activityArrangement.activities,callback:function(e){t.$set(t.activityArrangement,"activities",e)},expression:"activityArrangement.activities"}},[i("transition-group",{attrs:{type:"transition",name:"flip-list"}},t._l(t.activityArrangement.activities,function(e,s){return i("q-item",{key:s},[i("q-item-main",[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.label?e.label:"")+"\n\t\t\t\t\t\t\t\t\t\t")]),i("q-item-side",{attrs:{right:"",icon:t.isDontMove(e)}})],1)}))],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[t.isEdit?t._e():i("q-btn",{staticClass:"full-width",attrs:{color:"primary"},on:{click:t.saveArrangement}},[t._v("Save")])],1)],1),i("q-inner-loading",{attrs:{visible:t.getNewActivityLoading}},[i("q-spinner",{attrs:{size:"50px",color:"primary"}})],1)],1)],1)],1)},a=[],o=(i("rGqo"),i("INYr"),i("MVZn")),r=i.n(o),n=(i("0mN4"),i("EbCt")),c=i("FRYs"),l=i.n(c),u=i("ta7f"),d=i("wdPS"),v={created:function(){this.loadSelectedCourse()},mounted:function(){this.$bindAsArray("testData",this.$database.ref("contractSigned").orderByChild("accountNumber").equalTo("IZRDZI3QGX")),this.$bindAsArray("events",this.$database.ref("events")),this.$bindAsArray("courses",this.$database.ref("settings/courses")),this.$bindAsArray("activities",this.$database.ref("settings/activityList"))},update:function(){this.$bindAsArray("testData",this.$database.ref("contractSigned").orderByChild("accountNumber").equalTo("IZRDZI3QGX")),this.$bindAsArray("events",this.$database.ref("events")),this.$bindAsArray("courses",this.$database.ref("settings/courses")),this.$bindAsArray("activities",this.$database.ref("settings/activityList"))},validations:function(){return{courseName:{required:u["required"]},activityName:{required:u["required"]}}},components:{SlickList:n["SlickList"],SlickItem:n["SlickItem"],draggable:l.a},watch:{actType:function(){"detailed"===this.actType?(this.activityStatus.time=!0,this.activityStatus.location=!0,this.activityStatus.details=!0,this.activityStatus.dueDate=!1):(this.activityStatus.time=!1,this.activityStatus.location=!1,this.activityStatus.details=!1,this.activityStatus.dueDate=!0)}},computed:{getLastActivity:function(){try{var t=this.selectCourse.activities.length,e=this.selectCourse.activities[t-1];return e}catch(t){return""}},dragOptions:function(){return{animation:0,ghostClass:"ghost",group:"label",disabled:this.editActivity}},courses:{get:function(){try{return this.$store.state.startUp.courses}catch(t){return[]}},set:function(t){this.$store.state.settings.courses=t}},newActivityModal:{get:function(){return this.$store.state.settings.newActivityModal},set:function(t){this.$store.commit("settings/updateNewActivityModal",t)}},arrangeModal:{get:function(){return this.$store.state.settings.arrangeModal},set:function(t){this.$store.state.settings.arrangeModal=t}},activitiesModal:{get:function(){return this.$store.state.settings.activitiesModal},set:function(t){this.$store.commit("settings/updateActivitiesModal",t)}},getNewActivityLoading:function(){return this.$store.state.settings.activityLoading},newCourseModal:{get:function(){return this.$store.state.settings.newCourseModal},set:function(t){this.$store.commit("settings/updateNewCourseModal",t)}},eventTypeOpt:function(){try{var t=this.$lodash.map(this.courses,function(t){return{label:t.courseName,value:t[".key"]}});return t}catch(t){return[]}},activitiesOpt:function(){var t=this;try{for(var e=0;e<this.activities.length;e++)this.activities[e].visible=!0;if(this.isEdit){for(e=0;e<this.activities.length;e++)this.activities[e].visible=!0;for(var i=[],s=0;s<this.activities.length;s++)this.activities[s].visible&&(delete this.activities[s][".key"],i.push({label:this.activities[s].label,value:this.activities[s].label}));return i}if(""!=this.newActivity.courseKey){var a=this.$lodash.filter(this.courses,function(e){return e[".key"]===t.newActivity.courseKey});for(e=0;e<a[0].activities.length;e++)for(var o=0;o<this.activities.length;o++)this.activities[o].label===a[0].activities[e].label&&(this.activities[o].visible=!1);var r=[];for(s=0;s<this.activities.length;s++)this.activities[s].visible&&r.push({label:this.activities[s].label,value:this.activities[s]});return r}return[]}catch(t){return[]}},parseActivities:function(){return this.$store.getters["settings/parseActivities"]},activityError:function(){return!this.isEdit&&this.$store.getters["settings/isExistActivity"]({activities:this.selectCourse.activities,activity:this.activityName})},getActivities:function(){try{return this.selectCourse.activities}catch(t){}}},data:function(){return{actType:"",testData:[],editActivity:!1,myArray:[],event:[],activityArrangement:[],list:["Foo","Bar","Baz"],items:["Item 1","Item 2","Item 3","Item 4","Item 5","Item 6","Item 7","Item 8"],dayAfter:{dateNumber:1,dateType:"week"},dateTypeOpt:[{label:"days",value:"days"},{label:"weeks",value:"weeks"},{label:"months",value:"months"}],activityIndex:-1,activities:[],kidsFashionCourse:[],basicCourse:[],fullCourse:[],isEdit:!1,checked:"",courseName:"",selectCourse:{},activityName:"",newActivities:"",activityStatus:{time:!1,location:!1,details:!1,dueDate:!1},newActivity:{eventType:"",activityName:"",courseKey:"",time:!0,location:!0,details:!0,dueDate:!1}}},methods:{addActBtn:function(){console.log("loadSelectedCourse",this.dayAfter),this.dayAfter.dateNumber=0,this.newActivity.time=!0,this.newActivity.location=!0,this.newActivity.details=!0,this.activityStatus.time=!0,this.activityStatus.location=!0,this.activityStatus.details=!0},isUsed:function(t){console.log("a",t)},isDontMove:function(t){return"orientation"!==t.value&&"payment"!==t.value&&"final event"!==t.value&&"photoshoot"!==t.value&&"photoliking"!==t.value&&t.value!==this.getLastActivity.value?"open_with":""},onMove:function(t){var e=t.relatedContext,i=t.draggedContext,s=e.element,a=i.element;return(!s||!s.fixed)&&!a.fixed},loadSelectedCourse:function(){try{this.selectCourse=this.$store.state.startUp.courses[0]}catch(t){this.selectCourse.activities=[]}},clickCourse:function(t){this.selectCourse=t},arrangement:function(){this.activityArrangement=r()({},this.selectCourse)},onMoveCallback:function(t,e){},checkMove:function(t){console.log("evt",t);var e=t.relatedContext.list.length;return console.log("l",e),"orientation"!==t.draggedContext.element.value&&"payment"!==t.draggedContext.element.value&&0!==t.draggedContext.futureIndex&&"final event"!==t.draggedContext.element.value&&"general_rehersal"!==t.draggedContext.element.value&&t.draggedContext.futureIndex!==t.relatedContext.list.length-1&&"photoshoot"!==t.draggedContext.element.value&&"photoliking"!==t.draggedContext.element.value&&t.draggedContext.futureIndex>3&&t.draggedContext.element.value!==this.getLastActivity.value},sortEnd:function(t,e,i,s){},activityErrorLabel:function(){return""===this.activityName?"":this.isEdit?"":"Activity Already Exist"},input:function(t){},sortStart:function(t,e,i,s){},search:function(t,e){var i=this;setTimeout(function(){e(Object(d["a"])(t,{field:"value",list:i.parseActivities}))},1e3)},selected:function(t){this.activityName=t.label},capitalize:function(){try{this.courseName=this.$store.getters["settings/titleCase"](this.courseName)}catch(t){}},addNewEventActivity:function(){var t=this,e=this.$lodash.filter(this.courses,function(e){return e[".key"]===t.newActivity.courseKey}),i=this.newActivity.activityName;i.details=this.newActivity.details,i.time=this.newActivity.time,i.location=this.newActivity.location,i.dueDate=this.newActivity.dueDate,delete i[".key"],e[0].activities.push(i),this.$store.dispatch("settings/addNewEventActivity",{payload:e[0],fireb:this.$firebase.database(),quasu:this.$q}),this.$bindAsArray("courses",this.$database.ref("settings/courses"))},addNewCourse:function(){this.$v.courseName.$touch(),this.$v.courseName.$error?this.$q.notify("Enter Course Name."):(this.capitalize(),this.$store.dispatch("settings/addNewCourse",{payload:this.courseName,fireb:this.$firebase.database(),quasu:this.$q}),this.courseName="")},removeCourse:function(t){var e=this;this.$q.dialog({title:"Delete Confirmation",message:"Do you want to remove ".concat(t.courseName,"?"),ok:"Yes",cancel:"No"}).then(function(){e.$store.dispatch("settings/removeCourse",{payload:t,fireb:e.$firebase.database(),quasu:e.$q}).then(function(){e.loadSelectedCourse()})}).catch(function(){})},addActivities:function(){this.$v.activityName.$touch(),console.log("test",this.$v.activityName.$error),this.$v.activityName.$error||this.activityError?this.$q.notify("Please Enter Activity Name"):(this.$store.dispatch("settings/addActivities",{activity:this.activityName,status:this.activityStatus,dayAfter:this.dayAfter,course:this.selectCourse}),this.activityName="",this.$bindAsArray("courses",this.$database.ref("settings/courses")),this.loadSelectedCourse())},removeActivities:function(t){var e=this;this.$q.dialog({title:"Delete Confirmation",message:"Do you want to remove ".concat(t.label,"?"),ok:"Yes",cancel:"No"}).then(function(){e.$store.dispatch("settings/removeActivities",{payload:t,fireb:e.$database,quasu:e.$q})}).catch(function(){})},clearModal:function(){var t=this,e=this.$lodash.findIndex(this.courses,function(e){return e[".key"]===t.selectCourse[".key"]});this.selectCourse=this.courses[e],this.activityStatus.time=!1,this.activityStatus.location=!1,this.activityStatus.details=!1,this.activityStatus.dueDate=!1,this.dayAfter.dateNumber=0,this.dayAfter.dateType="days",this.activityName="",this.isEdit=!1},clearNewCourseModal:function(){this.newCourse=""},dontDelete:function(t){return"orientation"!==t&&"payment"!==t&&"photoshoot"!==t&&"photoliking"!==t&&"general rehersal"!==t&&"final event"!==t&&t!==this.getLastActivity.value},isEditActivity:function(t){return"orientation"!==t},editMode:function(t,e,i){this.selectCourse=t,this.dayAfter.dateNumber=e.dayAfter.dateNumber,this.dayAfter.dateType=e.dayAfter.dateType,this.activityName=e.label,this.activityStatus.details=e.details,this.activityStatus.dueDate=e.dueDate,this.activityStatus.location=e.location,this.activityStatus.time=e.time,this.activityIndex=i,this.isEdit=!0,this.$forceUpdate(),this.$store.state.settings.activitiesModal=!0},updateActivity:function(){var t=this;this.$store.dispatch("settings/editActivity",{course:this.selectCourse,activity:this.activityName,index:this.activityIndex,dayAfter:this.dayAfter,status:this.activityStatus}).then(function(){var e=t.$lodash.findIndex(t.courses,function(e){return e[".key"]===t.selectCourse[".key"]});t.selectCourse=t.courses[e],t.$forceUpdate()}),this.$bindAsArray("courses",this.$database.ref("settings/courses"))},removeActivity:function(t,e){var i=this;console.log("course",t),console.log("act",e),this.$q.dialog({title:"Delete Confirmation",message:"Do you want to delete ".concat(t.courseName," ").concat(e.label,"?"),ok:"Yes",cancel:"No"}).then(function(){i.$store.dispatch("settings/removeActivity",{course:t,activity:e})}).catch(function(){}),this.$bindAsArray("courses",this.$database.ref("settings/courses"))},saveArrangement:function(){var t=this;this.$q.dialog({title:"Save Confirmation",message:"Do you want to save ?",ok:"Yes",cancel:"No"}).then(function(){t.$store.dispatch("settings/saveArrangement",t.activityArrangement),t.$bindAsArray("courses",t.$database.ref("settings/courses"))}).catch(function(){})},isUsedCourse:function(t){var e=new Array;this.$lodash.forEach(this.events,function(t){try{for(var i=0;i<t.seasons.length;i++)e.push(t.seasons[i])}catch(t){}});var i=this.$lodash.findIndex(e,function(e){return e.course===t[".key"]});return-1===i},isDueEnable:function(){this.newActivity.time=!1,this.newActivity.location=!1,this.newActivity.details=!1,this.activityStatus.time=!1,this.activityStatus.location=!1,this.activityStatus.details=!1},test:function(){console.log("selectCourse",this.selectCourse);var t=this.selectCourse.activities.length,e=this.selectCourse.activities[t-1];return console.log("lastAct",e),e}}},h=v,y=(i("mGVy"),i("KHd+")),m=Object(y["a"])(h,s,a,!1,null,null,null);e["default"]=m.exports},mGVy:function(t,e,i){"use strict";var s=i("EbEZ"),a=i.n(s);a.a}}]);