(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"9Ekx":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md"},[a("div",[a("p",{staticClass:"q-title"},[e._v("View Mode: ")]),a("q-btn-toggle",{staticClass:"q-mx-md",attrs:{rounded:"",size:"sm","toggle-color":"primary",options:[{label:"Batch",value:"batchMode"},{label:"Calendar",value:"calendarMode"},{label:"Agenda",value:"agendaMode"}]},model:{value:e.viewMode,callback:function(t){e.viewMode=t},expression:"viewMode"}})],1),a("div",{staticClass:"row q-my-md"},[a("div",{staticClass:"col-2"},[a("q-list",{attrs:{"inset-separator":"",highlight:""}},[a("q-list-header",[e._v("Seasons")]),e._l(e.getSeasons,function(t,s){return a("q-item",{key:s,nativeOn:{click:function(a){e.selectedSeason=t}}},[a("q-item-main",[e._v(e._s(t.seasonName))]),a("q-item-side",{attrs:{right:""}},["standby"===t.status?a("q-item-tile",{attrs:{icon:"power_settings_new",color:"negative"}}):e._e(),"open"===t.status?a("q-item-tile",{attrs:{icon:"present_to_all",color:"blue"}}):e._e(),"finished"===t.status?a("q-item-tile",{attrs:{icon:"done",color:"green"}}):e._e()],1)],1)})],2)],1),"batchMode"===e.viewMode?a("div",{staticClass:"col q-ml-md"},[a("q-table",{attrs:{title:e.getSeasonName,data:e.customBatches,columns:e.customColumn,"row-key":"batchNumber"},scopedSlots:e._u([{key:"body",fn:function(t){return a("q-tr",{staticClass:"cursor-pointer",attrs:{props:t},nativeOn:{click:function(a){e.rowClick(t.row)}}},e._l(t.cols,function(s,n){return a("q-td",{key:s.name,attrs:{props:t}},["batchNumber"!==s.name?a("p",[e._v(e._s(e.$moment(s.value).format("ll")))]):a("p",[e._v(e._s(n+1))])])}))}}])})],1):e._e(),"calendarMode"===e.viewMode?a("div",{staticStyle:{height:"500px",width:"1000px"}},[a("calendar-view",{key:Date.now(),staticClass:"theme-default holiday-us-traditional q-ml-md",attrs:{"show-date":e.showDate,events:e.seasonEventSchedules,"show-event-times":e.showEventTimes,timeFormatOptions:{hour:"numeric",minute:"numeric",hour12:!0},startingDayOfWeek:e.startingDayOfWeek},on:{"show-date-change":e.setShowDate,"click-event":e.clickEvent,"drop-on-date":e.dropOnDate}})],1):e._e(),"agendaMode"===e.viewMode?a("div",[a("calendar-agenda",{staticClass:"q-ma-md",attrs:{"start-date":e.showDate,"event-array":e.agendaSeasonSchedules,"allow-editing":!1}})],1):e._e()])])},n=[],o=a("MVZn"),i=a.n(o),l=(a("yt8O"),a("lSNA")),c=a.n(l),r=(a("rGqo"),a("RIqP")),d=a.n(r),h=a("VVcl"),u=a.n(h),p=a("kv6+"),v={created:function(){this.eventKey=this.$route.params.eventKey,this.loadSelectSeason()},mounted:function(){this.$bindAsArray("schedules",this.$database.ref("event_schedules")),this.$bindAsArray("event",this.$database.ref("events").orderByKey().equalTo(this.eventKey))},components:{CalendarView:u.a,CalendarAgenda:p["b"]},computed:{agendaSeasonSchedules:function(){try{var e=d()(this.seasonEventSchedules);console.log("activities",e);var t=this.$lodash.map(e,function(e){if("payment"!==e.type)return{id:e.id,summary:e.title,description:e.details?e.details:"",location:e.location?e.location:"",start:{dateTime:new Date(e.startDate).toISOString()},end:{dateTime:new Date(e.endDate).toISOString()},color:"faded"}}),a=this.$lodash.compact(t);return a}catch(e){return[]}},seasonEventSchedules:function(){var e=this;try{var t=new Array,a=d()(this.seasonBatches);return this.$lodash.forEach(a,function(a){e.$lodash.forEach(a.activities,function(e){e.startDate=new Date(e.startDate),e.endDate=new Date(e.endDate),t.push(e)})}),t}catch(e){return[]}},getSeasonName:function(){try{return this.selectedSeason.seasonName}catch(e){return""}},customBatches:function(){var e=this;try{var t=new Array,a=d()(this.seasonBatches[0].activities);return console.log("selectedSeason",a),this.$lodash.forEach(this.seasonBatches,function(a){var s=[],n=0,o=0;e.$lodash.forEach(a.activities,function(t){new Array;if(t.dueDate){var a=c()({},"".concat(e.$lodash.capitalize(t.type)," Start"),t.startDate),i=c()({},"".concat(e.$lodash.capitalize(t.type)," End"),t.endDate);s.push(a),s.push(i)}else if("payment"===t.type){++n;var l=c()({},"".concat(e.$lodash.capitalize(t.type)," ").concat(n),t.startDate);s.push(l)}else if("workshop"===t.type){++o;var r=c()({},"".concat(e.$lodash.capitalize(t.type)," ").concat(o),t.startDate);s.push(r)}else{var d=c()({},"".concat(e.$lodash.capitalize(t.type)),t.startDate);s.push(d)}});for(var l=0;l<s.length;l++){var r=e.$lodash.keys(s[l])[0],d=s[l][r];console.log("value",d),s[r]=r,s[r]=d}s.splice(0,s.length),console.log("cust2",s),t.push(i()({},s))}),console.log("custom batches",t),t}catch(e){return[]}},customColumn:function(){var e=this;try{var t=this.seasonBatches[0].activities,a=new Array,s=0,n=0;this.$lodash.forEach(t,function(t){if(t.dueDate){var o={name:e.$lodash.capitalize(t.type)+"Start",required:!0,label:e.$lodash.capitalize(t.type)+" Start",align:"left",field:e.$lodash.capitalize(t.type)+" Start"},i={name:e.$lodash.capitalize(t.type)+"End",required:!0,label:e.$lodash.capitalize(t.type)+" End",align:"left",field:e.$lodash.capitalize(t.type)+" End"};a.push(o),a.push(i)}else if("payment"===t.type){s++;var l={name:t.title,required:!0,label:"".concat(e.$lodash.capitalize(t.type)," ").concat(s),align:"left",field:"".concat(e.$lodash.capitalize(t.type)," ").concat(s)};a.push(l)}else if("workshop"===t.type){n++;var c={name:t.title,required:!0,label:"".concat(e.$lodash.capitalize(t.type)," ").concat(n),align:"left",field:"".concat(e.$lodash.capitalize(t.type)," ").concat(n)};a.push(c)}else{var r={name:t.title,required:!0,label:e.$lodash.capitalize(t.type),align:"left",field:e.$lodash.capitalize(t.type)};a.push(r)}});var o={name:"batchNumber",label:"Batch",align:"left"};return a.splice(0,0,o),console.log("custom column",a),a}catch(e){return[]}},seasonBatches:function(){var e=this;try{var t=this.$lodash.filter(this.schedules,function(t){return t.eventKey===e.eventKey&&t.seasonName===e.selectedSeason.seasonName});return t}catch(e){return[]}},latestSeason:function(){var e=this.getSeasons.length;return this.getSeasons[e-1]},getSeasons:function(){try{return this.event[0].seasons}catch(e){return[]}}},data:function(){return{startingDayOfWeek:0,showEventTimes:!0,showDate:new Date,schedules:[],selectedSeason:{},viewMode:"batchMode",events:[],event:[],eventKey:"",columns:[{name:"desc",required:!0,label:"Dessert (100g serving)",align:"left",field:"name",sortable:!0,classes:"my-class",style:"width: 500px"}],tableData:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,sodium:87,calcium:"14%",iron:"1%"}]}},methods:{dropOnDate:function(e,t){},clickEvent:function(e){},setShowDate:function(e){this.showDate=e},getCol:function(e){console.log("c",e)},loadSelectSeason:function(){var e=this;try{var t=this.$store.state.startUp.events,a=this.$lodash.filter(t,function(t){return t[".key"]===e.eventKey})[0],s=a.seasons.length;this.selectedSeason=a.seasons[s-1]}catch(e){this.selectedSeason={}}},test:function(){console.log("seasonBatches",this.seasonBatches)}}},m=v,f=a("KHd+"),y=Object(f["a"])(m,s,n,!1,null,null,null);t["default"]=y.exports}}]);