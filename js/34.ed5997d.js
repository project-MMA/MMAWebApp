(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"2rlu":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-md"},[a("div",{staticClass:"row q-my-md"},[a("div",{staticClass:"col-2"},[a("q-list",{attrs:{"inset-separator":"",highlight:""}},[a("q-list-header",[e._v("Seasons")]),e._l(e.getSeasons,function(t,s){return a("q-item",{key:s,nativeOn:{click:function(a){e.selectedSeason=t}}},[a("q-item-main",[e._v(e._s(t.seasonName))]),a("q-item-side",{attrs:{right:""}},["standby"===t.status?a("q-item-tile",{attrs:{icon:"build",color:"warning"}}):e._e(),"open"===t.status?a("q-item-tile",{attrs:{icon:"sync",color:"blue"}}):e._e(),"finished"===t.status?a("q-item-tile",{attrs:{icon:"done",color:"green"}}):e._e()],1)],1)})],2)],1),a("div",{staticClass:"col q-ml-md"},[a("q-table",{attrs:{title:e.selectedSeason.seasonName,data:e.getAllTransactions,columns:e.Modelcolumns,filter:e.filter,"row-key":"batchNumber"},scopedSlots:e._u([{key:"top-right",fn:function(t){return[a("q-search",{staticClass:"bg-dark",staticStyle:{width:"180px"},attrs:{"hide-underline":"",inverted:""},on:{input:e.test},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]}},{key:"body-cell-firstName",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n          "+e._s(t.row.firstName)+"\n          ")])}},{key:"body-cell-payments",fn:function(t){return a("q-td",{attrs:{props:t}},[a("q-btn-dropdown",{attrs:{label:"Payment Records",size:"sm"}},e._l(e.getModelsPaymentTransactions(t.row[".key"]),function(t,s){return a("q-list",{key:s,attrs:{highlight:"",link:"",dense:""}},[a("q-item",[a("q-item-main",{},[e._v("â‚± "+e._s(t.transaction_amount)+" - "+e._s(t.title.slice(-10))+" - "+e._s(e.$moment(t.create_time).format("ll")))])],1)],1)}))],1)}}])})],1)])])},n=[],i=a("MVZn"),o=a.n(i),l=a("lSNA"),r=a.n(l),c=a("RIqP"),d=a.n(c),h=(a("rGqo"),a("yt8O"),a("VVcl")),u=a.n(h),f=a("kv6+"),m={created:function(){this.eventKey=this.$route.params.eventKey,this.loadSelectSeason()},mounted:function(){this.$bindAsArray("schedules",this.$database.ref("event_schedules")),this.$bindAsArray("event",this.$database.ref("events").orderByKey().equalTo(this.eventKey)),this.$bindAsArray("payment_transactions",this.$database.ref("payment_transactions")),this.$bindAsArray("contractsigned",this.$database.ref("contractSigned"))},components:{CalendarView:u.a,CalendarAgenda:f["b"]},computed:{getAllTransactions:function(){var e=this;try{var t=this.payment_transactions;console.log("payment_transactions",t);var a=this.$lodash.groupBy(t,"modelKey"),s=this.$lodash.keys(a);console.log("keys",s);for(var n=[],i=this.contractsigned,o=0;o<s.length;o++)for(var l=0;l<i.length;l++)s[o]===i[l][".key"]&&n.push(i[l]);var r=this.$lodash.filter(n,function(t){return t.seasonName===e.selectedSeason.seasonName});return r}catch(e){return console.log("err",e),[]}},agendaSeasonSchedules:function(){try{var e=d()(this.seasonEventSchedules);console.log("activities",e);var t=this.$lodash.map(e,function(e){if("payment"!==e.type)return{id:e.id,summary:e.title,description:e.details?e.details:"",location:e.location?e.location:"",start:{dateTime:new Date(e.startDate).toISOString()},end:{dateTime:new Date(e.endDate).toISOString()},color:"faded"}}),a=this.$lodash.compact(t);return a}catch(e){return[]}},seasonEventSchedules:function(){var e=this;try{var t=new Array,a=d()(this.seasonBatches);return this.$lodash.forEach(a,function(a){e.$lodash.forEach(a.activities,function(e){e.startDate=new Date(e.startDate),e.endDate=new Date(e.endDate),t.push(e)})}),t}catch(e){return[]}},getSeasonName:function(){try{return this.selectedSeason.seasonName}catch(e){return""}},customBatches:function(){var e=this;try{var t=new Array,a=d()(this.seasonBatches[0].activities);return console.log("selectedSeason",a),this.$lodash.forEach(this.seasonBatches,function(a){var s=[],n=0,i=0;e.$lodash.forEach(a.activities,function(t){new Array;if(t.dueDate){var a=r()({},"".concat(e.$lodash.capitalize(t.type)," Start"),t.startDate),o=r()({},"".concat(e.$lodash.capitalize(t.type)," End"),t.endDate);s.push(a),s.push(o)}else if("payment"===t.type){++n;var l=r()({},"".concat(e.$lodash.capitalize(t.type)," ").concat(n),t.startDate);s.push(l)}else if("workshop"===t.type){++i;var c=r()({},"".concat(e.$lodash.capitalize(t.type)," ").concat(i),t.startDate);s.push(c)}else{var d=r()({},"".concat(e.$lodash.capitalize(t.type)),t.startDate);s.push(d)}});for(var l=0;l<s.length;l++){var c=e.$lodash.keys(s[l])[0],d=s[l][c];console.log("value",d),s[c]=c,s[c]=d}s.splice(0,s.length),console.log("cust2",s),t.push(o()({},s))}),console.log("custom batches",t),t}catch(e){return[]}},customColumn:function(){var e=this;try{var t=this.seasonBatches[0].activities,a=new Array,s=0,n=0;this.$lodash.forEach(t,function(t){if(t.dueDate){var i={name:e.$lodash.capitalize(t.type)+"Start",required:!0,label:e.$lodash.capitalize(t.type)+" Start",align:"left",field:e.$lodash.capitalize(t.type)+" Start"},o={name:e.$lodash.capitalize(t.type)+"End",required:!0,label:e.$lodash.capitalize(t.type)+" End",align:"left",field:e.$lodash.capitalize(t.type)+" End"};a.push(i),a.push(o)}else if("payment"===t.type){s++;var l={name:t.title,required:!0,label:"".concat(e.$lodash.capitalize(t.type)," ").concat(s),align:"left",field:"".concat(e.$lodash.capitalize(t.type)," ").concat(s)};a.push(l)}else if("workshop"===t.type){n++;var r={name:t.title,required:!0,label:"".concat(e.$lodash.capitalize(t.type)," ").concat(n),align:"left",field:"".concat(e.$lodash.capitalize(t.type)," ").concat(n)};a.push(r)}else{var c={name:t.title,required:!0,label:e.$lodash.capitalize(t.type),align:"left",field:e.$lodash.capitalize(t.type)};a.push(c)}});var i={name:"batchNumber",label:"Batch",align:"left"};return a.splice(0,0,i),console.log("custom column",a),a}catch(e){return[]}},seasonBatches:function(){var e=this;try{var t=this.$lodash.filter(this.schedules,function(t){return t.eventKey===e.eventKey&&t.seasonName===e.selectedSeason.seasonName});return t}catch(e){return[]}},latestSeason:function(){var e=this.getSeasons.length;return this.getSeasons[e-1]},getSeasons:function(){try{return this.event[0].seasons}catch(e){return[]}}},data:function(){return{filter:"",contractsigned:[],payment_transactions:[],startingDayOfWeek:0,showEventTimes:!0,showDate:new Date,schedules:[],selectedSeason:{},viewMode:"batchMode",events:[],event:[],eventKey:"",columns:[{name:"desc",required:!0,label:"Dessert (100g serving)",align:"left",field:"name",sortable:!0,classes:"my-class",style:"width: 500px"}],Modelcolumns:[{name:"firstName",required:!0,label:"First Name",align:"left",sortable:!0,field:"firstName"},{name:"lastName",required:!0,label:"Last Name",align:"left",sortable:!0,field:"lastName"},{name:"seasonName",required:!0,label:"Season Name",align:"left",sortable:!0,field:"seasonName"},{name:"balance",required:!0,label:"Remaining Balance",align:"left",sortable:!0,field:"balance"},{name:"payments",required:!0,label:"Payment Transactions",align:"left",sortable:!0}],tableData:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,sodium:87,calcium:"14%",iron:"1%"}]}},methods:{dropOnDate:function(e,t){},clickEvent:function(e){},setShowDate:function(e){this.showDate=e},getCol:function(e){console.log("c",e)},loadSelectSeason:function(){var e=this;try{var t=this.$store.state.startUp.events,a=this.$lodash.filter(t,function(t){return t[".key"]===e.eventKey})[0],s=a.seasons.length;this.selectedSeason=a.seasons[s-1]}catch(e){this.selectedSeason={}}},test:function(){console.log("seasonBatches",this.seasonBatches)},getModelsPaymentTransactions:function(e){try{var t=this.$lodash.filter(this.payment_transactions,function(t){return t.modelKey===e});return console.log("modelpayments",t),t}catch(e){return console.log("error",e),[]}}}},p=m,y=a("KHd+"),v=Object(y["a"])(p,s,n,!1,null,null,null);t["default"]=v.exports}}]);