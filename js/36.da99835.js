(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{"1DE+":function(e,t,a){},"3h1N":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{attrs:{color:"faded"}},[a("q-toolbar-title",[e._v("\n      Attendance List  \n    ")]),e.ifOrientation?a("q-btn",{staticClass:"q-ml-sm q-ma-sm float-right",attrs:{icon:"people",label:"Show Ups("+e.getShowupCount+")",color:"dark"},on:{click:e.showShowUpModal}}):e._e(),e.ifOrientation?a("q-btn",{staticClass:"q-ml-sm q-ma-sm float-right",attrs:{icon:"border_color",label:"Contract Signing("+e.getShowupCount+")",color:"secondary",to:{name:"contractsigned",params:{id:e.getSeasonName}}}}):e._e(),e.ifNotOrientation?a("q-btn",{staticClass:"q-ml-sm q-ma-sm float-right",attrs:{icon:"check_box",label:"Confirmed Attendance("+e.getPresentCount+")",color:"secondary"},on:{click:e.showConfirmed}}):e._e()],1),a("div",{staticClass:"col-3 q-ma-md"},[a("q-table",{attrs:{title:e.$route.params.title,data:e.getModels,loading:e.tableLoading,columns:e.Modelcolumns,pagination:e.Modelpagination,separator:"horizontal",selection:"multiple",selected:e.selected,"no-data-label":"No Models","row-key":".key",filter:e.filter},on:{"update:pagination":function(t){e.Modelpagination=t},"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top-left",fn:function(t){return[a("h5",{staticStyle:{"font-size":"18"}},[e._v(e._s(e.activityType.toUpperCase())+" - "),a("span",{staticClass:"text-faded text-weight-light text-italic"},[e._v(e._s(e.activityTitle))])])]}},{key:"top-right",fn:function(t){return[a("q-search",{staticClass:"bg-dark",staticStyle:{width:"180px"},attrs:{"hide-underline":"",inverted:""},on:{input:e.test},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("q-btn",{staticClass:"q-ml-sm float-right cardsButtonsDesktop",attrs:{label:"View Selected("+e.getSelectedRowCount+")",color:"primary"},on:{click:e.showModal}}),a("q-btn",{staticClass:"q-ml-sm float-right cardsButtonsMobile",attrs:{label:"View Selected("+e.getSelectedRowCount+")",color:"primary",size:"sm"},on:{click:e.showModal}})]}},{key:"body-cell-Picture",fn:function(e){return a("q-td",{attrs:{props:e}},[a("div",{style:"border-radius:15px; width: 150px;height:125px;background-position: center;background-image: url("+e.row.photo+");background-repeat: no-repeat;background-size: cover;border: 2px solid black;"})])}},{key:"body-cell-lastName",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.row.lastName)+"\n        ")])}},{key:"body-cell-firstName",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.row.firstName)+"\n        ")])}},{key:"body-cell-middleInitial",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.row.middleInitial)+"\n        ")])}},{key:"body-cell-gender",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.row.gender)+"\n        ")])}},{key:"body-cell-age",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.row.age)+"\n        ")])}},{key:"body-cell-mobilenumber",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.row.mobileNumber)+"\n        ")])}},{key:"body-cell-pastExp",fn:function(t){return a("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.row.pastModelExp)+"\n        ")])}}])})],1),e.attendanceModal?a("q-modal",{attrs:{"content-css":{minWidth:"35vw",minHeight:"95vh"}},model:{value:e.attendanceModal,callback:function(t){e.attendanceModal=t},expression:"attendanceModal"}},[a("q-modal-layout",[a("q-toolbar",{staticClass:"bg-dark full-width"},[a("q-toolbar-title",[e._v("\n            "+e._s(e.activityTitle)+"\n          ")])],1),a("q-search",{staticClass:"text-white",attrs:{icon:"search",inverted:"",color:"faded",clearable:"",placeholder:"Search name"},model:{value:e.selectSearch,callback:function(t){e.selectSearch=t},expression:"selectSearch"}}),a("q-scroll-area",{staticStyle:{width:"100%",height:"85vh"}},[e._l(e.filteredSelect,function(t){return a("q-list",{key:t[".key"],attrs:{link:"",dense:""}},[a("q-item",[a("q-item-side",{attrs:{icon:"label",color:"faded"}}),a("q-item-main",{staticClass:"capitalize q-body-1"},[e._v(e._s(t.firstName)+" "+e._s(t.middleInitial)+". "+e._s(t.lastName))]),a("q-item-side",[a("q-btn",{attrs:{icon:"close",outline:"",color:"red",push:"",rounded:"",size:"sm"},on:{click:function(a){e.UnSelect(t)}}})],1)],1)],1)}),0===e.getSelectedRowCount?a("div",{staticClass:"text-center text-faded q-display-1 fixed-center"},[e._v("No Models Listed")]):e._e()],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[e.ifOrientation?a("q-btn",{staticClass:"q-pa-sm full-width",attrs:{color:"primary",icon:"check",size:"lg",label:"Confirm Attendance("+e.getSelectedRowCount+")"},on:{click:e.setSelectedPresent}}):e._e(),e.ifNotOrientation?a("q-btn",{staticClass:"q-pa-sm full-width",attrs:{color:"primary",icon:"check_box",size:"lg",label:"Confirm Attendance("+e.getSelectedRowCount+")"},on:{click:e.setActivityAttendance}}):e._e()],1)],1)],1):e._e(),e.showUpsModal?a("q-modal",{attrs:{"content-css":{minWidth:"35vw",minHeight:"95vh"}},model:{value:e.showUpsModal,callback:function(t){e.showUpsModal=t},expression:"showUpsModal"}},[a("q-modal-layout",[a("q-toolbar",{staticClass:"bg-dark full-width"},[a("q-toolbar-title",[e._v("\n            "+e._s(e.activityTitle)+"\n          ")])],1),a("q-search",{staticClass:"text-white",attrs:{icon:"search",inverted:"",color:"faded",clearable:"",placeholder:"Search name"},model:{value:e.showUpSearch,callback:function(t){e.showUpSearch=t},expression:"showUpSearch"}}),a("q-scroll-area",{staticStyle:{width:"100%",height:"85vh"}},[e._l(e.filteredShowUp,function(t){return a("q-list",{key:t[".key"],attrs:{link:"",dense:""}},[a("q-item",[a("q-item-side",{attrs:{icon:"label",color:"faded"}}),a("q-item-main",{staticClass:"capitalize q-body-1"},[e._v(e._s(t.firstName)+" "+e._s(t.middleInitial)+". "+e._s(t.lastName))]),a("q-item-side",[a("q-btn",{attrs:{icon:"close",outline:"",color:"red",push:"",rounded:"",size:"sm"},on:{click:function(a){e.Back2Models(t)}}})],1)],1)],1)}),0===e.getShowupCount?a("div",{staticClass:"text-center text-faded q-display-1 fixed-center"},[e._v("No Models Listed")]):e._e()],2)],1)],1):e._e(),e.confirmedAttendanceModal?a("q-modal",{attrs:{"content-css":{minWidth:"35vw",minHeight:"95vh"}},model:{value:e.confirmedAttendanceModal,callback:function(t){e.confirmedAttendanceModal=t},expression:"confirmedAttendanceModal"}},[a("q-modal-layout",[a("q-toolbar",{staticClass:"bg-dark full-width"},[a("q-toolbar-title",[e._v("\n            "+e._s(e.activityTitle)+"\n          ")])],1),a("q-search",{staticClass:"text-white",attrs:{icon:"search",inverted:"",color:"faded",clearable:"",placeholder:"Search name"},model:{value:e.nameSearch,callback:function(t){e.nameSearch=t},expression:"nameSearch"}}),a("q-scroll-area",{staticStyle:{width:"100%",height:"85vh"}},[e._l(e.filteredConfirm,function(t){return a("q-list",{key:t[".key"],attrs:{link:"",dense:""}},[a("q-item",[a("q-item-side",{attrs:{icon:"check_box",color:"faded"}}),a("q-item-main",{staticClass:"capitalize q-body-1"},[e._v(e._s(t.firstName)+" "+e._s(t.middleInitial)+". "+e._s(t.lastName))]),a("q-item-side",[a("q-btn",{attrs:{icon:"close",outline:"",color:"red",push:"",rounded:"",size:"sm"},on:{click:function(a){e.getConfirmationBack(t)}}})],1)],1)],1)}),0===e.getPresentCount?a("div",{staticClass:"text-center text-faded q-display-1 fixed-center"},[e._v("No Models Listed")]):e._e()],2)],1)],1):e._e(),a("q-page-sticky",{attrs:{position:"bottom-right",offset:[20,50]}},[a("q-btn",{staticClass:"animate-pop",attrs:{fab:"",color:"primary",icon:"check_box"},on:{click:e.showModal}},[a("span",{staticClass:"text-weight-thin",staticStyle:{"font-size":"9px"}},[e._v("Selected")])]),e.getSelectedRowCount?a("q-chip",{attrs:{floating:"",color:"red"}},[e._v(e._s(e.getSelectedRowCount))]):e._e()],1)],1)},n=[],o=(a("a1Th"),a("MVZn")),s=a.n(o),l=(a("INYr"),a("SRfc"),a("Oyvg"),a("oYx3"),{name:"attendanceSheet",created:function(){this.batchKey=this.$route.params.id,this.activityTitle=this.$route.params.title,this.activityType=this.$route.params.type},mounted:function(){this.$bindAsArray("event_schedules",this.$database.ref("event_schedules")),this.$bindAsArray("model_list",this.$database.ref("models")),this.$bindAsArray("showUpList",this.$database.ref("showUpModels")),this.$bindAsArray("contractsigned",this.$database.ref("contractSigned")),this.$bindAsArray("attendanceList",this.$database.ref("attendance/"+this.$route.params.id+"/"+this.$route.params.title+"/models")),this.$bindAsArray("confirmedList",this.$database.ref("attendance/"+this.$route.params.id+"/"+this.$route.params.title+"/present")),console.log("confirmedList",this.confirmedList)},computed:{filteredShowUp:function(){var e=this;return this.getShowUps.filter(function(t){var a=new RegExp(e.showUpSearch,"i"),i=t.firstName+" "+t.lastName;return i.match(a)})},filteredSelect:function(){var e=this;return this.selected.filter(function(t){var a=new RegExp(e.selectSearch,"i"),i=t.firstName+" "+t.lastName;return i.match(a)})},filteredConfirm:function(){var e=this;return this.confirmedList.filter(function(t){var a=new RegExp(e.nameSearch,"i"),i=t.firstName+" "+t.lastName;return i.match(a)})},getActivities:function(){return console.log("activities",this.$store.getters["schedules/getSeeAllSchedules"]),this.$store.getters["schedules/getSeeAllSchedules"]},getModels:function(){var e=this;try{if("orientation"!==this.$route.params.type)return console.log("activity models",this.attendanceList),this.attendanceList;var t=this.$lodash.filter(this.model_list,function(t){return t.batchKey===e.$route.params.id});return console.log("modellist",t),t}catch(e){return[]}},getShowUps:function(){var e=this,t=this.$lodash.filter(this.showUpList,function(t){return t.batchKey===e.batchKey});return t},getSelectedRowCount:function(){return console.log("selectedL",this.selected.length),console.log("selectedL",this.selected),this.selected.length},getShowupCount:function(){var e=this,t=this.$lodash.filter(this.showUpList,function(t){return t.batchKey===e.batchKey});return console.log("length",t.length),t.length},getPresentCount:function(){return this.$bindAsArray("confirmedList",this.$database.ref("attendance/"+this.$route.params.id+"/"+this.$route.params.title+"/present")),this.confirmedList.length},getSeasonName:function(){var e=this;try{console.log("eventS",this.event_schedules);var t=this.$lodash.filter(this.event_schedules,function(t){if(t[".key"]===e.batchKey)return t});return console.log("seasonGet",t[0].seasonName),t[0].seasonName}catch(e){return""}},ifNotOrientation:function(){return"orientation"!==this.$route.params.type},ifOrientation:function(){return"orientation"===this.$route.params.type}},data:function(){return{attendanceList:[],attendanceModal:!1,showUpsModal:!1,confirmedAttendanceModal:!1,filter:"",selected:[],activityType:"",activityTitle:"",batchKey:"",nameSearch:"",selectSearch:"",showUpSearch:"",contractsigned:[],event_schedules:[],model_list:[],showUpList:[],tableLoading:!1,columns:[{name:"title",required:!0,label:"title",align:"left",field:"title",sortable:!0}],Modelcolumns:[{name:"Picture",required:!0,label:"Picture",align:"center",sortable:!0},{name:"firstName",required:!0,label:"First Name",align:"left",sortable:!0,field:"firstName"},{name:"middleInitial",required:!0,label:"M.I.",align:"left",sortable:!0,field:"middleInitial"},{name:"lastName",required:!0,label:"Last Name",align:"left",sortable:!0,field:"lastName"},{name:"gender",required:!0,label:"Gender",align:"left",field:"gender",sortable:!0},{name:"age",required:!0,label:"Age",align:"left",sortable:!0,field:"age"},{name:"mobilenumber",required:!0,label:"Mobile Number",align:"left",field:"mobileNumber",sortable:!0},{name:"pastExp",required:!0,label:"Past Modelling Exp.",align:"left",sortable:!0,field:"pastModelExp"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:10},Modelpagination:{sortBy:null,descending:!1,page:1,rowsPerPage:10}}},methods:{showSeason:function(e){console.log("show season",e)},test:function(){},showModal:function(){this.attendanceModal=!0},showShowUpModal:function(){this.showUpsModal=!0},showConfirmed:function(){this.confirmedAttendanceModal=!0},isPresent:function(e){var t=this,a=this.$lodash.findIndex(e.activitiesAttended,function(e){return e.type===t.activityType});if(-1!=a)return e.activitiesAttended[a].status},present:function(e){var t=this;console.log("m",e);var a=s()({},e),i=a[".key"],n=this.$lodash.findIndex(a.activitiesAttended,function(e){return e.type===t.activityType});-1!=n&&(e.activitiesAttended[n].status=!0,delete a[".key"],console.log("model",a),this.$database.ref("showUpModels").child(i).set(a).then(function(){console.log("status updated")}).catch(function(e){console.log(e)})),this.$forceUpdate()},notSet:function(e){var t=this;console.log("not set",e);var a=e[".key"],i=this.$lodash.findIndex(e.activitiesAttended,function(e){return e.type===t.activityType});-1!=i&&(e.activitiesAttended[i].status=!1,this.$database.ref("showUpModels").child(a).remove().then(function(){console.log("model remove in showup")}).catch(function(e){console.log("err",e)}))},setSelectedPresent:function(){var e=this;this.$q.dialog({title:"Confirm Model/s Attendance?",message:"",ok:"Yes",cancel:"No"}).then(function(){for(var t=function(){var t=e.selected[a],n=t[".key"],o=e;e.selected[a].dateAdded=(new Date).toString(),i=e.$lodash.findIndex(t.activitiesAttended,function(t){return t.type===e.activityType}),-1!=i&&(t.activitiesAttended[i].status=!0,delete t[".key"],console.log("model selected",t),e.$database.ref("showUpModels").child(n).set(t).then(function(){console.log("status updated"),o.$database.ref("models").child(n).remove().then(function(){e.selected=[],o.$bindAsArray("model_list",o.$database.ref("models")),o.$forceUpdate(),e.attendanceModal=!1}).catch(function(){console.log("err on remove")})}).catch(function(e){console.log(e)}))},a=0;a<e.selected.length;a++){var i;t()}e.$q.notify({message:"Model/s Attendance Confirm",type:"positive",color:"positive",textColor:"white",icon:"info"})}).catch(function(){})},UnSelect:function(e){var t=e,a=this.$lodash.filter(this.selected,function(e){if(e[".key"]!==t[".key"])return e});this.selected=a},Back2Models:function(e){var t=this;console.log("not set",e);var a=e[".key"],i=e,n=this.$lodash.findIndex(e.activitiesAttended,function(e){return e.type===t.activityType});-1!=n&&(e.activitiesAttended[n].status=!1,delete i[".key"],this.$database.ref("models").child(a).set(i).then(function(){t.$database.ref("showUpModels").child(a).remove().then(function(){console.log("model remove in showup"),t.$bindAsArray("showUpList",t.$database.ref("showUpModels")),t.$forceUpdate()}).catch(function(e){console.log("err",e)})}))},setActivityAttendance:function(){var e=this;this.$q.dialog({title:"Confirm Model/s Attendance?",message:"",ok:"Yes",cancel:"No"}).then(function(){for(var t=e.activityType,a=function(){var a=s()({},e.selected[i]);a.activityID=e.activityTitle;var n=a[".key"],o=e;delete a[".key"],console.log("model selected",a),"final event"===t&&e.$database.ref("contractSigned/"+n+"/finished").set(!0),console.log(e.$route.params.id+e.$route.params.title),e.$database.ref("attendance/"+e.$route.params.id+"/"+e.$route.params.title+"/present").child(n).set(a).then(function(){console.log("status updated"),o.$database.ref("attendance/"+e.$route.params.id+"/"+e.$route.params.title+"/models").child(n).remove().then(function(){e.selected=[],o.$bindAsArray("attendanceList",o.$database.ref("attendance/"+e.$route.params.id+"/"+e.$route.params.title+"/models")),o.$forceUpdate(),e.attendanceModal=!1}).catch(function(){console.log("err on remove")})}).catch(function(e){console.log(e)})},i=0;i<e.selected.length;i++)a();e.$q.notify({message:"Model/s Attendance Confirm",type:"positive",color:"positive",textColor:"white",icon:"info"})}).catch(function(){})},getConfirmationBack:function(e){var t=this;console.log("not set",e);var a=e[".key"],i=this.activityType,n=e,o=this,s=this.$lodash.findIndex(e.activitiesAttended,function(e){return e.type===t.activityType});-1!=s&&(n.activitiesAttended[s].status=!1,delete n[".key"],console.log("model selected",n),"final event"===i&&this.$database.ref("contractSigned/"+a+"/finished").set(!1),this.$database.ref("attendance/"+this.$route.params.id+"/"+this.$route.params.title+"/models").child(a).set(n).then(function(){console.log("status updated"),o.$database.ref("attendance/"+t.$route.params.id+"/"+t.$route.params.title+"/present").child(a).remove().then(function(){t.selected=[],o.$bindAsArray("confirmedList",o.$database.ref("attendance/"+t.$route.params.id+"/"+t.$route.params.title+"/present")),o.$forceUpdate()}).catch(function(){console.log("err on remove")})}).catch(function(e){console.log(e)}))}}}),r=l,c=(a("E/W8"),a("KHd+")),d=Object(c["a"])(r,i,n,!1,null,null,null);t["default"]=d.exports},"E/W8":function(e,t,a){"use strict";var i=a("1DE+"),n=a.n(i);n.a}}]);