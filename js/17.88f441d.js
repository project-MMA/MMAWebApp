(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"7VKg":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"container flex q-mt-xl"},[e("div",{staticClass:"row"},[e("div",{},[e("q-card",{staticClass:"q-ma-sm col-md-4 col-sm-6 col-12-xs",staticStyle:{"border-radius":"20px"},attrs:{inline:""}},[e("q-card-title",{staticClass:"relative-position"},[e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"8px",transform:"translateY(-50%)"},attrs:{fab:"",color:"primary",icon:"how_to_vote"}}),e("div",{staticClass:"ellipsis"},[e("p",{staticClass:"q-headline"},[t._v("Registrants")])])],1),e("q-card-main",[e("apexcharts",{staticStyle:{"min-width":"250px"},attrs:{height:"200",width:"400",type:"line",options:t.registrantsLineData.chartOpt,series:t.registrantsLineData.series}})],1),e("q-card-separator"),e("q-card-actions",{staticClass:"q-pa-md bg-primary"},[e("p",{staticClass:"q-title text-white"},[t._v("No. of Registrants: "+t._s(t.totalRegistrants))])])],1)],1),e("div",{},[e("q-card",{staticClass:"q-ma-sm col-md-4 col-sm-6 col-12-xs ",staticStyle:{"border-radius":"20px"},attrs:{inline:""}},[e("q-card-title",{staticClass:"relative-position"},[e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"8px",transform:"translateY(-50%)"},attrs:{fab:"",color:"amber",icon:"timeline"}}),e("div",{staticClass:"ellipsis"},[e("p",{staticClass:"q-headline"},[t._v("Hit Rate")])])],1),e("q-card-main",[e("apexcharts",{staticStyle:{"min-width":"250px"},attrs:{width:"400",height:"200",type:"line",options:t.getHitRateLineData.chartOpt,series:t.getHitRateLineData.series}})],1),e("q-card-separator"),e("q-card-actions",{staticClass:"q-pa-md bg-amber"},[e("p",{staticClass:"q-title text-white"},[t._v("Hit Rate % of Signed Models: "+t._s(t.getHitSigned)+"%")])])],1)],1),e("div",{},[e("q-card",{staticClass:"q-ma-sm col-md-4 col-sm-6 col-12-xs",staticStyle:{"border-radius":"20px"},attrs:{inline:""}},[e("q-card-title",{staticClass:"relative-position"},[e("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"8px",transform:"translateY(-50%)"},attrs:{fab:"",color:"positive",icon:"attach_money"}}),e("div",{staticClass:"ellipsis"},[e("p",{staticClass:"q-headline"},[t._v("Sales")])])],1),e("q-card-main",[e("apexcharts",{staticStyle:{"min-width":"250px"},attrs:{width:"400",height:"200",type:"line",options:t.getSalesChartData.chartOpt,series:t.getSalesChartData.series}})],1),e("q-card-separator"),e("q-card-actions",{staticClass:"q-pa-md bg-positive"},[e("p",{staticClass:"q-title text-white"},[t._v("Sales Percent (%): "+t._s(t.getSalesPercent)+"%")])])],1)],1),e("div",{staticClass:"col-6 q-pa-sm"},[e("q-table",{staticStyle:{"border-radius":"20px"},attrs:{title:"Upcoming Event",data:t.getUpcomingSchedules,columns:t.columns2,pagination:t.pagination,"row-key":"name"},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body-cell-date",fn:function(a){return e("q-td",{attrs:{props:a}},[e("p",[t._v(t._s(t.$moment(a.row.startDate).format("ll")))])])}},{key:"body-cell-time",fn:function(a){return e("q-td",{attrs:{props:a}},[e("p",[t._v(t._s(t.$moment(a.row.startDate).format("LT")))])])}}])})],1),e("div",{staticClass:"col-6 q-pa-sm"},[e("q-table",{staticStyle:{"border-radius":"20px"},attrs:{title:"Top Events",data:t.topEventTable,columns:t.columns,"row-key":"name","hide-header":"","hide-bottom":""},scopedSlots:t._u([{key:"body-cell-index",fn:function(a){return e("q-td",{attrs:{props:a}},[e("p",[t._v(t._s(a.row.__index+1))])])}}])})],1)])])])},i=[],n=(e("yt8O"),e("RIqP")),r=e.n(n),o=(e("rGqo"),e("EyHm")),l=e.n(o),d=e("O2Fx"),c=e.n(d),h={name:"activity",components:{VueChart:c.a,apexcharts:l.a},mounted:function(){this.$bindAsArray("contractSigned",this.$database.ref("contractSigned")),this.$bindAsArray("schedules",this.$database.ref("event_schedules")),this.$bindAsArray("models",this.$database.ref("models")),this.$bindAsArray("showUps",this.$database.ref("showUpModels")),this.$bindAsArray("payments",this.$database.ref("payment_transactions"))},computed:{userAccess:function(){},getUpcomingSchedules:function(){var t=this;console.log("schedules",this.schedules);var a=new Array;return this.$lodash.forEach(this.schedules,function(e){t.$lodash.forEach(e.activities,function(e){var s=new Date,i=t.$mathMixin.dayDiff(s,new Date(e.startDate));i>=0&&"payment"!==e.type&&a.push(e)})}),this.$lodash.orderBy(a,function(t){return new Date(t.startDate)},"asc")},topEventTable:function(){var t=this.$lodash.groupBy(this.contractSigned,"eventName"),a=this.$lodash.map(t,function(t,a,e){var s={models:e[a].length,eventName:a};return s});return this.$lodash.orderBy(a,"models","desc")},getSalesChartData:function(){var t=this,a=r()(this.payments),e=this.$lodash.map(a,function(a){var e=t.$moment(new Date(a.create_time),"YYYY-MM-DD").format("MMMM");return a.dateMonthAdded=e,a}),s=this.$lodash.groupBy(e,"dateMonthAdded"),i=this.$lodash.keys(s),n=this.$lodash.map(s,function(a,e,s){return t.$lodash.forEach(a,function(t){t.transaction_amount=parseFloat(t.transaction_amount)}),s[e]=t.$lodash.sumBy(a,"transaction_amount"),s[e]});console.log("monts",i),console.log("dataCollected",n);var o={chart:{id:"HitRateChart"},xaxis:{categories:i}},l=[{name:"HitRate",data:r()(n)}],d={chartOpt:o,series:l};return console.log("salesChartData",d),d},getSalesPercent:function(){var t=this,a=r()(this.payments),e=this.$lodash.map(a,function(a){var e=t.$moment(new Date(a.create_time),"YYYY-MM-DD").format("MMMM");return a.dateMonthAdded=e,a}),s=this.$lodash.groupBy(e,"dateMonthAdded"),i=(this.$lodash.keys(s),this.$lodash.map(s,function(a,e,s){return t.$lodash.forEach(a,function(t){t.transaction_amount=parseFloat(t.transaction_amount)}),s[e]=t.$lodash.sumBy(a,"transaction_amount"),s[e]})),n=i.length,o=i[n-2],l=i[n-1];if("undefined"===typeof o)return 100;var d=parseFloat(o)/parseFloat(l)*100;return d.toFixed(2)},getHitRateLineData:function(){try{var t=this.getHitMonth,a=this.$lodash.keys(t),e=this.$lodash.map(t,function(t,a,e){return e[a]=e[a],e[a]}),s={chart:{id:"HitRateChart"},xaxis:{categories:a}},i=[{name:"HitRate",data:r()(e)}],n={chartOpt:s,series:i};return n}catch(t){return[]}},getHitMonth:function(){var t=this;try{var a=r()(this.contractSigned);this.$lodash.map(a,function(a){var e=t.$moment(new Date(a.dateAdded),"YYYY-MM-DD").format("MMMM");return a.dateMonthAdded=e,a});var e=this.$lodash.groupBy(a,"dateMonthAdded"),s=r()(this.showUps);this.$lodash.map(s,function(a){var e=t.$moment(new Date(a.dateAdded),"YYYY-MM-DD").format("MMMM");return a.dateMonthAdded=e,a});var i=this.$lodash.groupBy(s,"dateMonthAdded"),n=this.$lodash.map(e,function(t,a,s){var n=parseFloat(e[a].length)/parseFloat(i[a].length+e[a].length),r=100*n||0;return s[a]=r.toFixed(2),s})[0];return console.log("hitRateMonth",n),n}catch(t){return[]}},getHitSigned:function(){try{var t=this.contractSigned.length,a=parseInt(this.showUps.length)+parseInt(this.contractSigned.length),e=parseFloat(t)/parseFloat(a),s=100*e||0;return s.toFixed(2)}catch(t){return 0}},registrantsLineData:function(){var t=this.getRegistranstByMonth,a=this.$lodash.keys(t),e=this.$lodash.map(t,function(t,a,e){return e[a]=e[a].length,e[a]}),s={chart:{id:"registrantChart"},xaxis:{categories:a}},i=[{name:"Registrants",data:r()(e)}],n={chartOpt:s,series:i};return console.log("lineChartData",n),n},getRegistranstByMonth:function(){var t=this,a=this.registrants;console.log("registrants",this.registrants);var e=this.$lodash.map(a,function(a){var e=t.$moment(new Date(a.dateCreated),"YYYY-MM-DD").format("MMMM");return a.dateMonthAdded=e,a}),s=this.$lodash.groupBy(e,"dateMonthAdded");return console.log("registrantsByMonth",s),s},registrants:function(){var t=new Array;t.push(this.showUps),t.push(this.models),t.push(this.contractSigned);var a=this.$lodash.spread(this.$lodash.union)(t);return a},totalRegistrants:function(){return this.registrants.length}},data:function(){return{schedules:[],payments:[],chartOptions2:{chart:{id:"vuechart-example"},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]}},series:[{name:"Registrants",data:[30,40,45,50,49,60,70,91]}],showUps:[],models:[],contractSigned:[],chartOptions:{responsive:!0,maintainAspectRatio:!0},chartData:{labels:["January","February","march","april"],datasets:[{label:"Registrants",backgroundColor:"#027be3",data:[40,20,30,50]}]},columns:[{name:"index",required:!0,align:"left",field:"__index",sortable:!0,classes:"my-class",style:"width: 500px"},{name:"eventName",required:!0,align:"left",field:"eventName",sortable:!0},{name:"models",required:!0,align:"center",field:"models",sortable:!0}],columns2:[{name:"title",required:!0,align:"left",label:"Event Name",field:"id"},{name:"date",required:!0,align:"center",label:"Date",sortable:!0},{name:"time",required:!0,align:"center",label:"Time",field:"startDate",sortable:!0}],tableData:[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,sodium:87,calcium:"14%",iron:"1%"}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:5}}},methods:{test:function(){}}},u=h,p=(e("TCso"),e("KHd+")),m=Object(p["a"])(u,s,i,!1,null,null,null);a["default"]=m.exports},TCso:function(t,a,e){"use strict";var s=e("nCNe"),i=e.n(s);i.a},nCNe:function(t,a,e){}}]);